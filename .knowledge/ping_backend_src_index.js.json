{"is_source_file": true, "format": "JavaScript", "description": "This file is an Express.js server setup for a ping-monitor backend. It configures middleware for security, CORS, logging, rate limiting, defines health check endpoints, API routes for starting and stopping ping sessions, and initializes websocket support. The server listens on a configurable port and outputs its status and endpoints on startup.", "external_files": ["./pingService.js", "./ws.js"], "external_methods": ["initPingService", "startPing", "stopPing", "getSession", "attachWsServer"], "published": [], "classes": [], "methods": [{"name": "app.get('/api/health')", "description": "Health check endpoint (new path) that returns JSON indicating service status."}, {"name": "app.get(HEALTHCHECK_PATH)", "description": "Health check endpoint (legacy path) for backward compatibility."}, {"name": "app.post(['/api/ping/start', '/ping/start'])", "description": "API route to start a ping session, accepting host and optional count."}, {"name": "app.post(['/api/ping/stop', '/ping/stop'])", "description": "API route to stop a ping session by sessionId."}, {"name": "AnonymousFunctiondebf71d80100(origin, callback)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["dotenv.config()", "app.set('trust proxy', 1)", "helmet({ crossOriginResourcePolicy: { policy: 'cross-origin' } })", "cors({ origin: function (origin, callback) { ... } })", "app.use(corsOptions)", "app.use(morgan('dev'))", "app.use(express.json({ limit: '256kb' }))", "rateLimit({ windowMs: ..., max: ... })", "initPingService()", "startPing({ host, count })", "stopPing({ sessionId })", "attachWsServer({ server, getSession })", "http.createServer(app)", "server.listen(PORT, () => { ... })"], "search-terms": ["express server setup", "ping API", "health check endpoints", "WebSocket integration", "rate limiting", "security headers"], "state": 2, "file_id": 20, "knowledge_revision": 75, "git_revision": "1cbd6272b3308049f69442a367a8301ac3d17156", "revision_history": [{"49": ""}, {"65": "748feacbd03682becf95ed3df070fb49df9d095d"}, {"75": "1cbd6272b3308049f69442a367a8301ac3d17156"}], "ctags": [{"_type": "tag", "name": "AnonymousFunctiondebf71d80100", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^  origin: function (origin, callback) {$/", "language": "JavaScript", "kind": "function", "signature": "(origin, callback)"}, {"_type": "tag", "name": "HEALTHCHECK_PATH", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const HEALTHCHECK_PATH = process.env.HEALTHCHECK_PATH || '\\/health';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const LOG_LEVEL = process.env.LOG_LEVEL || 'info';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PORT", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const PORT = Number(process.env.PORT || 8080);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "RATE_LIMIT_MAX", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const RATE_LIMIT_MAX = Number(process.env.RATE_LIMIT_MAX || 30);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "RATE_LIMIT_WINDOW_MS", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const RATE_LIMIT_WINDOW_MS = Number(process.env.RATE_LIMIT_WINDOW_MS || 60000);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TRUST_PROXY", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const TRUST_PROXY = String(process.env.TRUST_PROXY || 'true').toLowerCase() === 'true';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowedOrigins", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const allowedOrigins = new Set();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const app = express();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "limiter", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const limiter = rateLimit({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "server", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/index.js", "pattern": "/^const server = http.createServer(app);$/", "language": "JavaScript", "kind": "constant"}], "hash": "cf0677820e190901d3380d4831506bf2", "format-version": 4, "code-base-name": "ping_gui_frontend", "filename": "ping_backend/src/index.js"}