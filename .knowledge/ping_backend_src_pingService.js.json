{"is_source_file": true, "format": "JavaScript", "description": "This file contains the implementation of a ping service, exposing functions to initialize sessions, start and stop ping processes, validate hosts, and broadcast output to connected clients via WebSocket sessions.", "external_files": ["child_process", "os", "uuid"], "external_methods": ["spawn"], "published": ["initPingService", "getSession", "startPing", "stopPing"], "classes": [], "methods": [{"name": "now()", "description": "Returns the current timestamp in milliseconds.", "scope": "", "scopeKind": ""}, {"name": "isWindows()", "description": "Checks if the current platform is Windows.", "scope": "", "scopeKind": ""}, {"name": "sleep(ms)", "description": "Creates a promise that resolves after a specified number of milliseconds.", "scope": "", "scopeKind": ""}, {"name": "safeKill(proc)", "description": "Sends a termination signal to the given process, attempting graceful shutdown first, then forceful kill if necessary.", "scope": "", "scopeKind": ""}, {"name": "validateHost(host)", "description": "Validates that the host string is a valid IPv4, IPv6, localhost, or domain name, and optionally denies private networks based on environment variable.", "scope": "", "scopeKind": ""}, {"name": "buildPingArgs({ host, count })", "description": "Constructs the command-line arguments for the ping command based on the platform and input parameters.", "scope": "", "scopeKind": ""}, {"name": "broadcastLine(session, line)", "description": "Sends a line of text to all open WebSocket clients associated with a session.", "scope": "", "scopeKind": ""}, {"name": "initPingService()", "description": "Initializes and returns the global ping service store, or returns existing if already initialized.", "scope": "", "scopeKind": ""}, {"name": "getSession(sessionId)", "description": "Retrieves a session object by sessionId.", "scope": "", "scopeKind": ""}, {"name": "startPing({ host, count })", "description": "Starts a new ping process for a specified host and optional count, creating a WebSocket session.", "scope": "", "scopeKind": ""}, {"name": "stopPing({ sessionId })", "description": "Stops an active ping session and cleans up resources.", "scope": "", "scopeKind": ""}], "calls": ["spawn", "setTimeout", "clearTimeout", "process.kill", "setTimeout", "broadcastLine", "safeKill", "uuidv4", "sleep", "child.stdout.on", "child.stderr.on", "child.on", "child.on", "sessions.set", "sessions.delete"], "search-terms": ["pingService", "startPing", "stopPing", "validateHost", "broadcastLine", "WebSocket", "session management", "child_process", "platform detection", "network validation"], "state": 2, "file_id": 21, "knowledge_revision": 51, "git_revision": "", "ctags": [{"_type": "tag", "name": "broadcastLine", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function broadcastLine(session, line) {$/", "language": "JavaScript", "kind": "function", "signature": "(session, line)"}, {"_type": "tag", "name": "buildPingArgs", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function buildPingArgs({ host, count }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ host, count })"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^    config: {$/", "language": "JavaScript", "kind": "class", "scope": "initPingService.store", "scopeKind": "class"}, {"_type": "tag", "name": "getSession", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^export function getSession(sessionId) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId)"}, {"_type": "tag", "name": "initPingService", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^export function initPingService() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isWindows", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function isWindows() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "maxConcurrentSessions", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^      maxConcurrentSessions: Number(process.env.MAX_CONCURRENT_SESSIONS || 5),$/", "language": "JavaScript", "kind": "property", "scope": "initPingService.store.config", "scopeKind": "class"}, {"_type": "tag", "name": "maxDurationMs", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^      maxDurationMs: Number(process.env.MAX_DURATION_MS || 5 * 60 * 1000), \\/\\/ default 5 minute/", "language": "JavaScript", "kind": "property", "scope": "initPingService.store.config", "scopeKind": "class"}, {"_type": "tag", "name": "maxLinesPerSession", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^      maxLinesPerSession: Number(process.env.MAX_LINES_PER_SESSION || 500),$/", "language": "JavaScript", "kind": "property", "scope": "initPingService.store.config", "scopeKind": "class"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function now() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "safeKill", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function safeKill(proc) {$/", "language": "JavaScript", "kind": "function", "signature": "(proc)"}, {"_type": "tag", "name": "sessionId", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^    sessionId,$/", "language": "JavaScript", "kind": "field", "scope": "startPing.session", "scopeKind": "class"}, {"_type": "tag", "name": "sessions", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^    sessions: new Map(),$/", "language": "JavaScript", "kind": "property", "scope": "initPingService.store", "scopeKind": "class"}, {"_type": "tag", "name": "sleep", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function sleep(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}, {"_type": "tag", "name": "startPing", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^export async function startPing({ host, count }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ host, count })"}, {"_type": "tag", "name": "stopPing", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^export async function stopPing({ sessionId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ sessionId })"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^  store = {$/", "language": "JavaScript", "kind": "class", "scope": "initPingService", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^let store = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "validateHost", "path": "/home/kavia/workspace/code-generation/ping-monitor-210934-210943/ping_backend/src/pingService.js", "pattern": "/^function validateHost(host) {$/", "language": "JavaScript", "kind": "function", "signature": "(host)"}], "hash": "411715195c91f744f2fdeab1a691c569", "format-version": 4, "code-base-name": "ping_gui_frontend", "filename": "ping_backend/src/pingService.js", "fields": [{"name": "maxConcurrentSessions: Number(process.env.MAX_CONCURRENT_SESSIONS || 5),", "scope": "initPingService.store.config", "scopeKind": "class", "description": "unavailable"}, {"name": "maxDurationMs: Number(process.env.MAX_DURATION_MS || 5 * 60 * 1000), \\/\\/ default 5 minute/", "scope": "initPingService.store.config", "scopeKind": "class", "description": "unavailable"}, {"name": "maxLinesPerSession: Number(process.env.MAX_LINES_PER_SESSION || 500),", "scope": "initPingService.store.config", "scopeKind": "class", "description": "unavailable"}, {"name": "sessionId,", "scope": "startPing.session", "scopeKind": "class", "description": "unavailable"}, {"name": "sessions: new Map(),", "scope": "initPingService.store", "scopeKind": "class", "description": "unavailable"}, {"name": "let store = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"51": ""}]}